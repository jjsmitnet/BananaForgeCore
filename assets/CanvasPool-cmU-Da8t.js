import{A as e,ht as t,it as n,lt as r,z as i}from"./colorToUniform-qiPE3OFO.js";var a={};function o(e,t,n){let r=2166136261;for(let n=0;n<t;n++)r^=e[n].uid,r=Math.imul(r,16777619),r>>>=0;return a[r]||s(e,t,r,n)}function s(t,n,i,o){let s={},c=0;for(let e=0;e<o;e++){let i=e<n?t[e]:r.EMPTY.source;s[c++]=i.source,s[c++]=i.style}let l=new e(s);return a[i]=l,l}var c=new class{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){let n=i.get().createCanvas();return n.width=e,n.height=t,{canvas:n,context:n.getContext(`2d`)}}getOptimalCanvasAndContext(e,n,r=1){e=Math.ceil(e*r-1e-6),n=Math.ceil(n*r-1e-6),e=t(e),n=t(n);let i=(e<<17)+(n<<1);this._canvasPool[i]||(this._canvasPool[i]=[]);let a=this._canvasPool[i].pop();return a||=this._createCanvasAndContext(e,n),a}returnCanvasAndContext(e){let{width:t,height:n}=e.canvas,r=(t<<17)+(n<<1);e.context.resetTransform(),e.context.clearRect(0,0,t,n),this._canvasPool[r].push(e)}clear(){this._canvasPool={}}};n.register(c);export{o as n,c as t};